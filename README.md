# 商品交易看板系统

这个系统帮助交易员记录和管理大宗商品交易。

## 如何运行项目

### 后端运行
1. 打开终端进入backend文件夹：
   ```bash
   cd backend
   ```
2. 安装依赖：
   ```bash
   pip install -r requirements.txt
   ```
3. 启动后端服务：
   ```bash
   python -m uvicorn main:app --reload
   ```
   服务将运行在 http://localhost:8000

### 前端运行
1. 打开另一个终端进入frontend文件夹：
   ```bash
   cd frontend
   ```
2. 安装依赖：
   ```bash
   npm install
   ```
3. 启动前端服务：
   ```bash
   npm run dev
   ```
   服务将运行在 http://localhost:5174

## 挑战和解决

### 主要挑战
在开发过程中，遇到的一个主要问题是表单验证的类型转换问题。当用户输入数量和价格时，即使输入了大于最小值的数值，系统仍然提示"数量不能小于0.1"或"价格不能小于0.01"的错误。

### 问题分析
通过查看浏览器控制台的输出，发现虽然用户输入的是数字，但在表单验证时，数值的类型可能不是number类型，或者存在精度问题，导致验证规则误判。

### 解决方案
1. 为输入组件添加了`@change`事件监听器，确保输入值在变化时立即转换为数字类型。
2. 在提交表单前，再次显式地将数量和价格转换为数字类型。
3. 修改了表单验证规则，使用自定义验证函数，显式检查值的类型和范围，并统一了验证触发器为`blur`。
4. 添加了详细的调试日志，跟踪值的变化和类型，帮助定位问题。

这些措施确保了输入值的类型正确，验证规则能够准确判断数值是否符合要求。

## 未来改进

如果有更多时间，我会从以下几个方面来改进这个迷你应用：

1. **用户认证和授权**：添加用户登录功能，区分不同权限的用户，确保系统安全。
2. **数据持久化**：使用数据库（如SQLite、PostgreSQL）代替内存存储，确保交易数据不会丢失。
3. **交易分析功能**：添加图表和统计功能，帮助交易员分析交易情况，如交易量趋势、盈亏分析等。
4. **UI/UX优化**：进一步改进界面设计，使其更美观、更易用，添加更多的交互反馈。
5. **错误处理和日志系统**：实现更完善的错误处理机制和日志系统，方便调试和问题追踪。
6. **API文档**：使用Swagger等工具生成API文档，方便前端开发人员了解和使用后端API。
7. **测试**：添加单元测试和集成测试，确保系统的稳定性和可靠性。